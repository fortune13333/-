# 链踪本地代理 (V3.0 - 局域网协作模式)

欢迎使用新版链踪本地代理！它已经从一个个人工具**升级**为一个轻量级的**局域网协作服务器**。它充当您的“链踪”Web应用程序、团队成员与真实网络设备之间的“中心枢纽”。

## 核心变化

-   **中央数据存储**: 所有设备和区块链数据现在统一存储在代理目录下的 `chaintrace_data.json` 文件中，不再使用浏览器的 `localStorage`。
-   **多用户协作**: 团队中只需一人运行此代理，其他人即可通过局域网IP连接，实现数据共享和协同操作。
-   **API 驱动**: 代理现在提供完整的数据管理API，前端的所有数据读写都通过代理完成。
-   **配置依然简单**: `config.ini` 仍然是您配置设备连接信息的唯一地点。

---

## 🚀 快速开始：设置为团队服务器

### 1. 选定一台“主机”

在您的团队中，选择一台稳定、可靠的电脑作为“主机”。这台电脑将7x24小时（或者在团队工作时间内）运行 `agent.py` 程序。

### 2. 在“主机”上进行设置

1.  **准备文件**: 在主机上创建一个文件夹 (例如 `chaintrace-server`)，并放入 `agent.py`, `config.ini`, 和 `requirements.txt`。
2.  **安装依赖**: 打开终端，进入该文件夹，运行 `pip install -r requirements.txt`。
3.  **配置 `config.ini`**:
    *   在 `[server]` 部分，为了让局域网内的其他电脑能访问，建议将 `host` 设置为 `0.0.0.0`。
        ```ini
        [server]
        host = 0.0.0.0
        port = 8000
        ```
    *   填写 `[credentials]` 和 `[device_map]`，与之前版本一样。
4.  **运行代理服务器**: 在终端中运行 `python agent.py` 或 `uvicorn agent:app --host 0.0.0.0`。
5.  **获取主机的局域网IP**:
    *   **Windows**: 在命令提示符中运行 `ipconfig`，找到 "IPv4 地址"。它通常看起来像 `192.168.1.10` 或 `10.0.0.5`。
    *   **macOS/Linux**: 在终端运行 `ifconfig` 或 `ip addr`。

    假设您获取到的IP是 `192.168.1.10`，那么您的链踪服务器地址就是 `http://192.168.1.10:8000`。

### 3. 其他团队成员如何连接

1.  确保您的电脑与“主机”在**同一个局域网/Wi-Fi**下。
2.  打开您的“链踪”Web应用。
3.  点击右上角的**设置图标**。
4.  在“本地代理接口”输入框中，填入“主机”的服务器地址 (例如 `http://192.168.1.10:8000`)。
5.  点击**“测试连接”**。成功后，您的Web应用就会从主机加载所有团队共享的数据！

现在，整个团队都可以看到相同的数据，并进行协作了！
